if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/top-app/top-app.js']) {
   __coverage__['build/top-app/top-app.js'] = {"path":"build/top-app/top-app.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":19},"end":{"line":1,"column":38}}},"2":{"name":"(anonymous_2)","line":62,"loc":{"start":{"line":62,"column":18},"end":{"line":62,"column":29}}},"3":{"name":"(anonymous_3)","line":66,"loc":{"start":{"line":66,"column":8},"end":{"line":66,"column":37}}},"4":{"name":"(anonymous_4)","line":82,"loc":{"start":{"line":82,"column":27},"end":{"line":82,"column":46}}},"5":{"name":"(anonymous_5)","line":92,"loc":{"start":{"line":92,"column":22},"end":{"line":92,"column":50}}},"6":{"name":"ensureTrailingSlash","line":104,"loc":{"start":{"line":104,"column":0},"end":{"line":104,"column":37}}},"7":{"name":"(anonymous_7)","line":112,"loc":{"start":{"line":112,"column":14},"end":{"line":112,"column":25}}},"8":{"name":"(anonymous_8)","line":117,"loc":{"start":{"line":117,"column":37},"end":{"line":117,"column":57}}},"9":{"name":"(anonymous_9)","line":143,"loc":{"start":{"line":143,"column":22},"end":{"line":143,"column":39}}},"10":{"name":"(anonymous_10)","line":153,"loc":{"start":{"line":153,"column":9},"end":{"line":153,"column":20}}},"11":{"name":"(anonymous_11)","line":171,"loc":{"start":{"line":171,"column":21},"end":{"line":171,"column":32}}},"12":{"name":"(anonymous_12)","line":182,"loc":{"start":{"line":182,"column":26},"end":{"line":182,"column":45}}},"13":{"name":"(anonymous_13)","line":192,"loc":{"start":{"line":192,"column":24},"end":{"line":192,"column":35}}},"14":{"name":"(anonymous_14)","line":206,"loc":{"start":{"line":206,"column":23},"end":{"line":206,"column":58}}},"15":{"name":"(anonymous_15)","line":215,"loc":{"start":{"line":215,"column":27},"end":{"line":215,"column":41}}},"16":{"name":"(anonymous_16)","line":263,"loc":{"start":{"line":263,"column":23},"end":{"line":263,"column":34}}},"17":{"name":"(anonymous_17)","line":267,"loc":{"start":{"line":267,"column":20},"end":{"line":267,"column":38}}},"18":{"name":"(anonymous_18)","line":272,"loc":{"start":{"line":272,"column":13},"end":{"line":272,"column":31}}},"19":{"name":"(anonymous_19)","line":316,"loc":{"start":{"line":316,"column":18},"end":{"line":316,"column":29}}},"20":{"name":"(anonymous_20)","line":320,"loc":{"start":{"line":320,"column":18},"end":{"line":320,"column":29}}},"21":{"name":"(anonymous_21)","line":333,"loc":{"start":{"line":333,"column":24},"end":{"line":333,"column":35}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":394,"column":82}},"2":{"start":{"line":6,"column":0},"end":{"line":42,"column":12}},"3":{"start":{"line":44,"column":0},"end":{"line":55,"column":11}},"4":{"start":{"line":62,"column":0},"end":{"line":102,"column":5}},"5":{"start":{"line":63,"column":1},"end":{"line":64,"column":80}},"6":{"start":{"line":66,"column":1},"end":{"line":101,"column":3}},"7":{"start":{"line":67,"column":2},"end":{"line":69,"column":19}},"8":{"start":{"line":71,"column":2},"end":{"line":74,"column":3}},"9":{"start":{"line":73,"column":3},"end":{"line":73,"column":10}},"10":{"start":{"line":76,"column":2},"end":{"line":80,"column":3}},"11":{"start":{"line":78,"column":3},"end":{"line":78,"column":34}},"12":{"start":{"line":79,"column":3},"end":{"line":79,"column":10}},"13":{"start":{"line":82,"column":2},"end":{"line":84,"column":5}},"14":{"start":{"line":83,"column":3},"end":{"line":83,"column":51}},"15":{"start":{"line":86,"column":2},"end":{"line":86,"column":33}},"16":{"start":{"line":90,"column":2},"end":{"line":100,"column":3}},"17":{"start":{"line":91,"column":3},"end":{"line":91,"column":27}},"18":{"start":{"line":92,"column":3},"end":{"line":96,"column":6}},"19":{"start":{"line":93,"column":4},"end":{"line":95,"column":5}},"20":{"start":{"line":94,"column":5},"end":{"line":94,"column":39}},"21":{"start":{"line":99,"column":3},"end":{"line":99,"column":28}},"22":{"start":{"line":104,"column":0},"end":{"line":106,"column":1}},"23":{"start":{"line":105,"column":1},"end":{"line":105,"column":73}},"24":{"start":{"line":108,"column":0},"end":{"line":389,"column":3}},"25":{"start":{"line":113,"column":2},"end":{"line":115,"column":10}},"26":{"start":{"line":117,"column":2},"end":{"line":121,"column":5}},"27":{"start":{"line":118,"column":3},"end":{"line":118,"column":54}},"28":{"start":{"line":120,"column":3},"end":{"line":120,"column":31}},"29":{"start":{"line":124,"column":2},"end":{"line":124,"column":17}},"30":{"start":{"line":126,"column":2},"end":{"line":126,"column":42}},"31":{"start":{"line":128,"column":2},"end":{"line":140,"column":5}},"32":{"start":{"line":142,"column":2},"end":{"line":142,"column":14}},"33":{"start":{"line":143,"column":2},"end":{"line":146,"column":5}},"34":{"start":{"line":144,"column":3},"end":{"line":144,"column":38}},"35":{"start":{"line":145,"column":3},"end":{"line":145,"column":64}},"36":{"start":{"line":147,"column":2},"end":{"line":147,"column":24}},"37":{"start":{"line":149,"column":2},"end":{"line":149,"column":66}},"38":{"start":{"line":150,"column":2},"end":{"line":150,"column":70}},"39":{"start":{"line":154,"column":2},"end":{"line":154,"column":15}},"40":{"start":{"line":156,"column":2},"end":{"line":156,"column":50}},"41":{"start":{"line":158,"column":2},"end":{"line":163,"column":5}},"42":{"start":{"line":165,"column":2},"end":{"line":165,"column":74}},"43":{"start":{"line":166,"column":2},"end":{"line":166,"column":30}},"44":{"start":{"line":168,"column":2},"end":{"line":168,"column":14}},"45":{"start":{"line":172,"column":2},"end":{"line":173,"column":11}},"46":{"start":{"line":175,"column":2},"end":{"line":178,"column":3}},"47":{"start":{"line":177,"column":3},"end":{"line":177,"column":10}},"48":{"start":{"line":180,"column":2},"end":{"line":180,"column":32}},"49":{"start":{"line":182,"column":2},"end":{"line":189,"column":11}},"50":{"start":{"line":183,"column":3},"end":{"line":184,"column":77}},"51":{"start":{"line":186,"column":3},"end":{"line":188,"column":4}},"52":{"start":{"line":187,"column":4},"end":{"line":187,"column":45}},"53":{"start":{"line":193,"column":2},"end":{"line":195,"column":17}},"54":{"start":{"line":197,"column":2},"end":{"line":200,"column":3}},"55":{"start":{"line":199,"column":3},"end":{"line":199,"column":10}},"56":{"start":{"line":202,"column":2},"end":{"line":202,"column":32}},"57":{"start":{"line":203,"column":2},"end":{"line":203,"column":44}},"58":{"start":{"line":204,"column":2},"end":{"line":204,"column":61}},"59":{"start":{"line":206,"column":2},"end":{"line":212,"column":11}},"60":{"start":{"line":207,"column":3},"end":{"line":207,"column":104}},"61":{"start":{"line":209,"column":3},"end":{"line":211,"column":4}},"62":{"start":{"line":210,"column":4},"end":{"line":210,"column":73}},"63":{"start":{"line":216,"column":2},"end":{"line":220,"column":17}},"64":{"start":{"line":222,"column":2},"end":{"line":230,"column":3}},"65":{"start":{"line":223,"column":3},"end":{"line":223,"column":41}},"66":{"start":{"line":225,"column":3},"end":{"line":229,"column":4}},"67":{"start":{"line":227,"column":4},"end":{"line":227,"column":61}},"68":{"start":{"line":228,"column":4},"end":{"line":228,"column":11}},"69":{"start":{"line":231,"column":2},"end":{"line":231,"column":62}},"70":{"start":{"line":233,"column":2},"end":{"line":235,"column":3}},"71":{"start":{"line":234,"column":3},"end":{"line":234,"column":43}},"72":{"start":{"line":237,"column":2},"end":{"line":247,"column":3}},"73":{"start":{"line":239,"column":3},"end":{"line":241,"column":4}},"74":{"start":{"line":240,"column":4},"end":{"line":240,"column":11}},"75":{"start":{"line":242,"column":3},"end":{"line":246,"column":4}},"76":{"start":{"line":244,"column":4},"end":{"line":244,"column":73}},"77":{"start":{"line":245,"column":4},"end":{"line":245,"column":11}},"78":{"start":{"line":249,"column":2},"end":{"line":253,"column":3}},"79":{"start":{"line":251,"column":3},"end":{"line":251,"column":29}},"80":{"start":{"line":252,"column":3},"end":{"line":252,"column":36}},"81":{"start":{"line":255,"column":2},"end":{"line":260,"column":3}},"82":{"start":{"line":256,"column":3},"end":{"line":256,"column":35}},"83":{"start":{"line":259,"column":3},"end":{"line":259,"column":31}},"84":{"start":{"line":264,"column":2},"end":{"line":264,"column":79}},"85":{"start":{"line":268,"column":2},"end":{"line":268,"column":51}},"86":{"start":{"line":269,"column":2},"end":{"line":269,"column":91}},"87":{"start":{"line":273,"column":2},"end":{"line":279,"column":7}},"88":{"start":{"line":281,"column":2},"end":{"line":284,"column":3}},"89":{"start":{"line":282,"column":3},"end":{"line":282,"column":73}},"90":{"start":{"line":283,"column":3},"end":{"line":283,"column":10}},"91":{"start":{"line":286,"column":2},"end":{"line":286,"column":44}},"92":{"start":{"line":287,"column":2},"end":{"line":287,"column":24}},"93":{"start":{"line":289,"column":2},"end":{"line":292,"column":4}},"94":{"start":{"line":294,"column":2},"end":{"line":298,"column":3}},"95":{"start":{"line":297,"column":3},"end":{"line":297,"column":33}},"96":{"start":{"line":301,"column":2},"end":{"line":301,"column":42}},"97":{"start":{"line":302,"column":2},"end":{"line":306,"column":3}},"98":{"start":{"line":303,"column":3},"end":{"line":305,"column":5}},"99":{"start":{"line":308,"column":2},"end":{"line":308,"column":29}},"100":{"start":{"line":310,"column":2},"end":{"line":310,"column":24}},"101":{"start":{"line":311,"column":2},"end":{"line":311,"column":38}},"102":{"start":{"line":313,"column":2},"end":{"line":313,"column":26}},"103":{"start":{"line":317,"column":2},"end":{"line":317,"column":47}},"104":{"start":{"line":321,"column":2},"end":{"line":323,"column":14}},"105":{"start":{"line":325,"column":2},"end":{"line":328,"column":3}},"106":{"start":{"line":326,"column":3},"end":{"line":326,"column":40}},"107":{"start":{"line":327,"column":3},"end":{"line":327,"column":63}},"108":{"start":{"line":330,"column":2},"end":{"line":330,"column":38}},"109":{"start":{"line":334,"column":2},"end":{"line":334,"column":92}},"110":{"start":{"line":391,"column":0},"end":{"line":391,"column":37}}},"branchMap":{"1":{"line":46,"type":"cond-expr","locations":[{"start":{"line":46,"column":36},"end":{"line":46,"column":52}},{"start":{"line":46,"column":55},"end":{"line":46,"column":57}}]},"2":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":2},"end":{"line":71,"column":2}},{"start":{"line":71,"column":2},"end":{"line":71,"column":2}}]},"3":{"line":71,"type":"binary-expr","locations":[{"start":{"line":71,"column":6},"end":{"line":71,"column":21}},{"start":{"line":71,"column":25},"end":{"line":71,"column":44}},{"start":{"line":72,"column":3},"end":{"line":72,"column":28}}]},"4":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":2},"end":{"line":76,"column":2}},{"start":{"line":76,"column":2},"end":{"line":76,"column":2}}]},"5":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":2},"end":{"line":90,"column":2}},{"start":{"line":90,"column":2},"end":{"line":90,"column":2}}]},"6":{"line":90,"type":"binary-expr","locations":[{"start":{"line":90,"column":6},"end":{"line":90,"column":22}},{"start":{"line":90,"column":26},"end":{"line":90,"column":76}}]},"7":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":4},"end":{"line":93,"column":4}},{"start":{"line":93,"column":4},"end":{"line":93,"column":4}}]},"8":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":8},"end":{"line":93,"column":15}},{"start":{"line":93,"column":19},"end":{"line":93,"column":55}}]},"9":{"line":105,"type":"cond-expr","locations":[{"start":{"line":105,"column":51},"end":{"line":105,"column":57}},{"start":{"line":105,"column":60},"end":{"line":105,"column":72}}]},"10":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":2},"end":{"line":175,"column":2}},{"start":{"line":175,"column":2},"end":{"line":175,"column":2}}]},"11":{"line":186,"type":"if","locations":[{"start":{"line":186,"column":3},"end":{"line":186,"column":3}},{"start":{"line":186,"column":3},"end":{"line":186,"column":3}}]},"12":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":2},"end":{"line":197,"column":2}},{"start":{"line":197,"column":2},"end":{"line":197,"column":2}}]},"13":{"line":204,"type":"cond-expr","locations":[{"start":{"line":204,"column":35},"end":{"line":204,"column":54}},{"start":{"line":204,"column":58},"end":{"line":204,"column":60}}]},"14":{"line":209,"type":"if","locations":[{"start":{"line":209,"column":3},"end":{"line":209,"column":3}},{"start":{"line":209,"column":3},"end":{"line":209,"column":3}}]},"15":{"line":218,"type":"cond-expr","locations":[{"start":{"line":218,"column":52},"end":{"line":218,"column":91}},{"start":{"line":218,"column":95},"end":{"line":218,"column":99}}]},"16":{"line":218,"type":"binary-expr","locations":[{"start":{"line":218,"column":14},"end":{"line":218,"column":29}},{"start":{"line":218,"column":33},"end":{"line":218,"column":48}}]},"17":{"line":222,"type":"if","locations":[{"start":{"line":222,"column":2},"end":{"line":222,"column":2}},{"start":{"line":222,"column":2},"end":{"line":222,"column":2}}]},"18":{"line":225,"type":"if","locations":[{"start":{"line":225,"column":3},"end":{"line":225,"column":3}},{"start":{"line":225,"column":3},"end":{"line":225,"column":3}}]},"19":{"line":233,"type":"if","locations":[{"start":{"line":233,"column":2},"end":{"line":233,"column":2}},{"start":{"line":233,"column":2},"end":{"line":233,"column":2}}]},"20":{"line":237,"type":"if","locations":[{"start":{"line":237,"column":2},"end":{"line":237,"column":2}},{"start":{"line":237,"column":2},"end":{"line":237,"column":2}}]},"21":{"line":239,"type":"if","locations":[{"start":{"line":239,"column":3},"end":{"line":239,"column":3}},{"start":{"line":239,"column":3},"end":{"line":239,"column":3}}]},"22":{"line":239,"type":"binary-expr","locations":[{"start":{"line":239,"column":7},"end":{"line":239,"column":21}},{"start":{"line":239,"column":25},"end":{"line":239,"column":62}}]},"23":{"line":242,"type":"if","locations":[{"start":{"line":242,"column":3},"end":{"line":242,"column":3}},{"start":{"line":242,"column":3},"end":{"line":242,"column":3}}]},"24":{"line":249,"type":"if","locations":[{"start":{"line":249,"column":2},"end":{"line":249,"column":2}},{"start":{"line":249,"column":2},"end":{"line":249,"column":2}}]},"25":{"line":255,"type":"if","locations":[{"start":{"line":255,"column":2},"end":{"line":255,"column":2}},{"start":{"line":255,"column":2},"end":{"line":255,"column":2}}]},"26":{"line":275,"type":"binary-expr","locations":[{"start":{"line":275,"column":11},"end":{"line":275,"column":13}},{"start":{"line":275,"column":17},"end":{"line":275,"column":34}}]},"27":{"line":281,"type":"if","locations":[{"start":{"line":281,"column":2},"end":{"line":281,"column":2}},{"start":{"line":281,"column":2},"end":{"line":281,"column":2}}]},"28":{"line":294,"type":"if","locations":[{"start":{"line":294,"column":2},"end":{"line":294,"column":2}},{"start":{"line":294,"column":2},"end":{"line":294,"column":2}}]},"29":{"line":302,"type":"if","locations":[{"start":{"line":302,"column":2},"end":{"line":302,"column":2}},{"start":{"line":302,"column":2},"end":{"line":302,"column":2}}]},"30":{"line":325,"type":"if","locations":[{"start":{"line":325,"column":2},"end":{"line":325,"column":2}},{"start":{"line":325,"column":2},"end":{"line":325,"column":2}}]},"31":{"line":334,"type":"cond-expr","locations":[{"start":{"line":334,"column":27},"end":{"line":334,"column":83}},{"start":{"line":334,"column":87},"end":{"line":334,"column":91}}]}},"code":["(function () { YUI.add('top-app', function (Y, NAME) {","","\"use strict\";","/*global alert*/","","var CLASS_NAMES = {","\t\tpjax: 'spike-pjax'","\t},","","\tMOCK_CONFIG = [{","\t\t// /hi => Y.use('hi-app') => new Y.SPIKE.HiApp(...)","\t\tcontextPath: 'hi',","\t\tmoduleName: 'hi-app',","\t\tnamespace: 'SPIKE',","\t\tclassName: 'HiApp'","\t}, {","\t\t// /bye => use('bye-app') => new Y.SPIKE.ByeApp(...)","\t\tcontextPath: 'bye',","\t\tmoduleName: 'bye-app',","\t\tnamespace: 'SPIKE',","\t\tclassName: 'ByeApp'","\t}],","","\tMOCK_PEOPLE = [{","\t\tidentifier: {","\t\t\tid: 'james',","\t\t\tnamespace: 'human'","\t\t},","\t\tname: 'James'","\t}, {","\t\tidentifier: {","\t\t\tid: 'spock',","\t\t\tnamespace: 'vulcan'","\t\t},","\t\tname: 'Spock'","\t}],","","\tTHROBBER_HTML = '<div class=\"throbber-large\"></div>',","","\tTopApp,","\t_renderMenu,","\tupdateHref;","","_renderMenu = Y.Handlebars.compile(","\t'<div class=\"pure-menu pure-menu-open pure-menu-horizontal\">' +","\t\t'<ul class=\"' + (Y.Router.html5 ? CLASS_NAMES.pjax : '') + '\">' +","\t\t\t'{{#each menuItems}}' +","\t\t\t\t'<li><a href=\"{{{../baseUrl}}}{{path}}/\" data-path=\"{{path}}\">{{label}}</a></li>' +","\t\t\t'{{/each}}' +","\t\t\t'<li class=\"pure-menu-separator\"></li>' +","\t\t\t'{{#each people}}' +","\t\t\t\t'<li><a href=\"{{{../rootUrl}}}{{@key}}/\" data-personIdentifier=\"{{@key}}\">{{name}}</a></li>' +","\t\t\t'{{/each}}' +","\t\t'</ul>' +","\t'</div>');","","// IE 9 (at least) exhibits a bug whereby progammatically updating an anchor's href attribute causes all other URL properties (e.g. host,","// port, etc) to be reset to blank. Some of these properties are used by YUI's Pjax utility to check for same-origin to determine whether","// to let a link-click go to the server or navigate via the Router. For this reason we have to (on browsers that exhibit the bug) copy all","// these properties off the anchor element and restore them after updating the href.","// TODO: when this is more than a spike this method should be in its own module and very thoroughly unit tested","var updateHref = (function() {","\tvar updateProperties,","\t\tpropertiesToSave = ['hash', 'host', 'hostname', 'port', 'protocol', 'search'];","","\treturn function(anchorNode, newUrl) {","\t\tvar href = anchorNode.get('href'),","\t\t\tpathname = anchorNode.get('pathname'),","\t\t\tproperties = {};","","\t\tif (newUrl === href || newUrl === pathname ||","\t\t\tnewUrl === '/' + pathname) { // Some versions of IE don't include the leading \"/\" in the pathname attribute","\t\t\treturn;","\t\t}","","\t\tif (updateProperties === false) {","\t\t\t// We've been through here before and concluded this browser does not exhibit the bug, we can safely just update the href","\t\t\tanchorNode.set('href', newUrl);","\t\t\treturn;","\t\t}","","\t\tY.each(propertiesToSave, function(propName) {","\t\t\tproperties[propName] = anchorNode.get(propName);","\t\t});","","\t\tanchorNode.set('href', newUrl);","","\t\t// TODO: is this an appropriate test for the bug? what if the new URL has a diff protocol? (seems unlikely...)","\t\t//       Maybe check for a blank hostname or something?","\t\tif (updateProperties || anchorNode.get('protocol') !== properties.protocol) {","\t\t\tupdateProperties = true;","\t\t\tY.each(properties, function(propVal, propName) {","\t\t\t\tif (propVal && anchorNode.get(propName) !== propVal) {","\t\t\t\t\tanchorNode.set(propName, propVal);","\t\t\t\t}","\t\t\t});","\t\t} else {","\t\t\t// This browser does not exhibit the bug, set updateProperties explicitly to false so we don't bother in future href updates","\t\t\tupdateProperties = false;","\t\t}","\t};","}());","","function ensureTrailingSlash(urlStr) {","\treturn urlStr.charAt(urlStr.length - 1) === '/' ? urlStr : urlStr + '/';","}","","TopApp = Y.Base.create('top-app', Y.App, [], {","\tviews: {","\t},","","\tinitializer: function() {","\t\tvar modules,","\t\t\tappConfigByPath = {},","\t\t\tpeople;","","\t\tmodules = Y.Array.map(MOCK_CONFIG, function(appConfig) {","\t\t\tappConfigByPath[appConfig.contextPath] = appConfig;","","\t\t\treturn appConfig.moduleName;","\t\t});","","\t\t// Trigger a prefetch of the modules for all the sub-apps","\t\tY.use(modules);","","\t\tthis._appConfigByPath = appConfigByPath;","","\t\tthis._menuItems = [{","\t\t\tlabel: 'Hi',","\t\t\tpath: 'hi'","\t\t}, {","\t\t\tlabel: 'Welcome',","\t\t\tpath: 'hi/welcome'","\t\t}, {","\t\t\tlabel: 'Bye',","\t\t\tpath: 'bye'","\t\t}, {","\t\t\tlabel: 'Good Riddance',","\t\t\tpath: 'bye/riddance'","\t\t}];","","\t\tpeople = {};","\t\tY.each(MOCK_PEOPLE, function(person) {","\t\t\tvar identifier = person.identifier;","\t\t\tpeople[identifier.id + '@' + identifier.namespace] =  person;","\t\t});","\t\tthis._people = people;","","\t\tthis.after('activePersonChange', this._updateAppMenuUrls, this);","\t\tthis.after('activeAppPathChange', this._updatePersonMenuUrls, this);","\t},","","\trender: function() {","\t\tvar menuHtml;","","\t\tTopApp.superclass.render.apply(this, arguments);","","\t\tmenuHtml = _renderMenu({","\t\t\tmenuItems: this._menuItems,","\t\t\tpeople: this._people,","\t\t\tbaseUrl: this.get('baseUrl'),","\t\t\trootUrl: this.get('rootUrl')","\t\t});","","\t\tthis.get('container').insertBefore(menuHtml, this.get('viewContainer'));","\t\tthis._renderWelcomeScreen();","","\t\treturn this;","\t},","","\t_updateAppMenuUrls: function() {","\t\tvar container = this.get('container'),","\t\t\tbaseUrl;","","\t\tif (!container) {","\t\t\t// Obviously haven't rendered yet, nothing to update","\t\t\treturn;","\t\t}","","\t\tbaseUrl = this.get('baseUrl');","","\t\tY.each(this._menuItems, function(menuItem) {","\t\t\tvar path = menuItem.path,","\t\t\t\tmenuItemNode = container.one('> .pure-menu a[data-path=\"' + path + '\"]');","","\t\t\tif (menuItemNode) {","\t\t\t\tupdateHref(menuItemNode, baseUrl + path);","\t\t\t}","\t\t}, this);","\t},","","\t_updatePersonMenuUrls: function() {","\t\tvar container = this.get('container'),","\t\t\trootUrl,","\t\t\tactiveAppPath;","","\t\tif (!container) {","\t\t\t// Obviously haven't rendered yet, nothing to update","\t\t\treturn;","\t\t}","","\t\trootUrl = this.get('rootUrl');","\t\tactiveAppPath = this.get('activeAppPath');","\t\tactiveAppPath = activeAppPath ? ('/' + activeAppPath) : '';","","\t\tY.each(this._people, function(person, personIdentifier) {","\t\t\tvar menuItemNode = container.one('> .pure-menu a[data-personIdentifier=\"' + personIdentifier + '\"]');","","\t\t\tif (menuItemNode) {","\t\t\t\tupdateHref(menuItemNode, rootUrl + personIdentifier + activeAppPath);","\t\t\t}","\t\t}, this);","\t},","","\t_handleTopAppRouteChange: function(req) {","\t\tvar params = req.params,","\t\t\tappPath = params.appPath,","\t\t\tpersonId = params.personId && params.personNs ? (params.personId + '@' + params.personNs) : null,","\t\t\tactivePerson = null,","\t\t\tpersonChanged;","","\t\tif (personId) {","\t\t\tactivePerson = this._people[personId];","","\t\t\tif (!activePerson) {","\t\t\t\t// TODO: need to figure out how to safely and appropriately handle this error case","\t\t\t\talert('404! No such person with id \"' + personId + '\".');","\t\t\t\treturn;","\t\t\t}","\t\t}","\t\tpersonChanged = (activePerson !== this.get('activePerson'));","","\t\tif (personChanged) {","\t\t\tthis._set('activePerson', activePerson);","\t\t}","","\t\tif (appPath) {","\t\t\t// If the activePerson and activeAppPath haven't changed, do nothing","\t\t\tif (!personChanged && this.get('activeAppPath') === appPath) {","\t\t\t\treturn;","\t\t\t}","\t\t\tif (!this._appConfigByPath[appPath]) {","\t\t\t\t// TODO: need to figure out how to safely and appropriately handle this error case","\t\t\t\talert('404! No registered application with path \"' + appPath + '\".');","\t\t\t\treturn;","\t\t\t}","\t\t}","","\t\tif (this._activeApp) {","\t\t\t// TODO: potentially cache (at most 1) previous activeApp for a more performant back nav? Or will that be too memory-heavy?","\t\t\tthis._activeApp.destroy();","\t\t\tthis._set('activeAppPath', null);","\t\t}","","\t\tif (appPath) {","\t\t\tthis._loadAndRenderApp(appPath);","\t\t} else {","\t\t\t// Alternatively, could have a nominated (or simply first in the list) default app in place of a welcome screen?","\t\t\tthis._renderWelcomeScreen();","\t\t}","\t},","","\t_renderWelcomeScreen: function() {","\t\tthis.get('viewContainer').set('text', 'Welcome to the nested Y.Apps spike!');","\t},","","\t_loadAndRenderApp: function(appPath) {","\t\tthis.get('viewContainer').setHTML(THROBBER_HTML);","\t\tY.use(this._appConfigByPath[appPath].moduleName, Y.bind(this._renderApp, this, appPath));","\t},","","\t_renderApp: function(appPath) {","\t\tvar cfg = this._appConfigByPath[appPath],","\t\t\tns = Y.namespace(cfg.namespace),","\t\t\tAppFn = ns && ns[cfg.className],","\t\t\tviewContainer,","\t\t\tappConfig,","\t\t\tactivePerson,","\t\t\tapp;","","\t\tif (!AppFn) {","\t\t\talert('500! Failed to load application with path \"' + appPath + '\".');","\t\t\treturn;","\t\t}","","\t\tviewContainer = this.get('viewContainer');","\t\tviewContainer.empty();","","\t\tappConfig = {","\t\t\tcontainer: viewContainer,","\t\t\troot: this.get('baseUrl') + appPath","\t\t};","","\t\tif (Y.Router.html5) {","\t\t\t// Null out the linkSelector as this Y.App is already listening for Pjax link clicks.","\t\t\t// See http://yuilibrary.com/yui/docs/app/#known-limitations for more info.","\t\t\tappConfig.linkSelector = null;","\t\t}","","","\t\tactivePerson = this.get('activePerson');","\t\tif (activePerson) {","\t\t\tappConfig.componentContext = {","\t\t\t\tperson: activePerson","\t\t\t};","\t\t}","","\t\tapp = new AppFn(appConfig);","","\t\tthis._activeApp = app;","\t\tthis._set('activeAppPath', appPath);","","\t\tapp.render().dispatch();","\t},","","\t_getAttrRootUrl: function() {","\t\treturn ensureTrailingSlash(this.get('root'));","\t},","","\t_getAttrBaseUrl: function() {","\t\tvar baseUrl = this.get('rootUrl'),","\t\t\tactivePerson = this.get('activePerson'),","\t\t\tidentifier;","","\t\tif (activePerson) {","\t\t\tidentifier = activePerson.identifier;","\t\t\tbaseUrl += identifier.id + '@' + identifier.namespace + '/';","\t\t}","","\t\treturn ensureTrailingSlash(baseUrl);","\t},","","\t_initAttrLinkSelector: function() {","\t\treturn Y.Router.html5 ? ('a.' + CLASS_NAMES.pjax +', .' + CLASS_NAMES.pjax + ' a') : null;","\t}","}, {","\tATTRS: {","\t\t// The following four attributes should probably be in a view model of some sort.","","\t\tactivePerson: {","\t\t\treadOnly: true","\t\t},","","\t\tactiveAppPath: {","\t\t\treadOnly: true","\t\t},","","\t\trootUrl: {","\t\t\treadOnly: true,","\t\t\tgetter: '_getAttrRootUrl'","\t\t},","","\t\tbaseUrl: {","\t\t\treadOnly: true,","\t\t\tgetter: '_getAttrBaseUrl'","\t\t},","","\t\tserverRouting: {","\t\t\tvalue: true","\t\t},","\t\thtml5: {","\t\t\tvalue: true","\t\t},","","\t\troutes: {","\t\t\t// The order of these routes is important to ensure no confusion between \"/appPath\" and \"/id@ns\" as the first part of the URL","\t\t\tvalue: [{","\t\t\t\tpath: '/:personId@:personNs',","\t\t\t\tcallbacks: '_handleTopAppRouteChange'","\t\t\t}, {","\t\t\t\tpath: '/:personId@:personNs/:appPath',","\t\t\t\tcallbacks: '_handleTopAppRouteChange'","\t\t\t}, {","\t\t\t\tpath: '/:personId@:personNs/:appPath/*',","\t\t\t\tcallbacks: '_handleTopAppRouteChange'","\t\t\t}, {","\t\t\t\tpath: '/:appPath',","\t\t\t\tcallbacks: '_handleTopAppRouteChange'","\t\t\t}, {","\t\t\t\tpath: '/:appPath/*',","\t\t\t\tcallbacks: '_handleTopAppRouteChange'","\t\t\t}]","\t\t},","","\t\tlinkSelector: {","\t\t\tvalueFn: '_initAttrLinkSelector'","\t\t}","\t}","});","","Y.namespace('SPIKE').TopApp = TopApp;","","","}, '@VERSION@', {\"requires\": [\"app-base\", \"array-extras\", \"base\", \"handlebars\"]});","","}());"]};
}
var __cov_SmYDCHTfRy8GfCIDJIdOtA = __coverage__['build/top-app/top-app.js'];
__cov_SmYDCHTfRy8GfCIDJIdOtA.s['1']++;YUI.add('top-app',function(Y,NAME){'use strict';__cov_SmYDCHTfRy8GfCIDJIdOtA.f['1']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['2']++;var CLASS_NAMES={pjax:'spike-pjax'},MOCK_CONFIG=[{contextPath:'hi',moduleName:'hi-app',namespace:'SPIKE',className:'HiApp'},{contextPath:'bye',moduleName:'bye-app',namespace:'SPIKE',className:'ByeApp'}],MOCK_PEOPLE=[{identifier:{id:'james',namespace:'human'},name:'James'},{identifier:{id:'spock',namespace:'vulcan'},name:'Spock'}],THROBBER_HTML='<div class="throbber-large"></div>',TopApp,_renderMenu,updateHref;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['3']++;_renderMenu=Y.Handlebars.compile('<div class="pure-menu pure-menu-open pure-menu-horizontal">'+'<ul class="'+(Y.Router.html5?(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['1'][0]++,CLASS_NAMES.pjax):(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['1'][1]++,''))+'">'+'{{#each menuItems}}'+'<li><a href="{{{../baseUrl}}}{{path}}/" data-path="{{path}}">{{label}}</a></li>'+'{{/each}}'+'<li class="pure-menu-separator"></li>'+'{{#each people}}'+'<li><a href="{{{../rootUrl}}}{{@key}}/" data-personIdentifier="{{@key}}">{{name}}</a></li>'+'{{/each}}'+'</ul>'+'</div>');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['4']++;var updateHref=function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['2']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['5']++;var updateProperties,propertiesToSave=['hash','host','hostname','port','protocol','search'];__cov_SmYDCHTfRy8GfCIDJIdOtA.s['6']++;return function(anchorNode,newUrl){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['3']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['7']++;var href=anchorNode.get('href'),pathname=anchorNode.get('pathname'),properties={};__cov_SmYDCHTfRy8GfCIDJIdOtA.s['8']++;if((__cov_SmYDCHTfRy8GfCIDJIdOtA.b['3'][0]++,newUrl===href)||(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['3'][1]++,newUrl===pathname)||(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['3'][2]++,newUrl==='/'+pathname)){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['2'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['9']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['2'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['10']++;if(updateProperties===false){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['4'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['11']++;anchorNode.set('href',newUrl);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['12']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['4'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['13']++;Y.each(propertiesToSave,function(propName){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['4']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['14']++;properties[propName]=anchorNode.get(propName);});__cov_SmYDCHTfRy8GfCIDJIdOtA.s['15']++;anchorNode.set('href',newUrl);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['16']++;if((__cov_SmYDCHTfRy8GfCIDJIdOtA.b['6'][0]++,updateProperties)||(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['6'][1]++,anchorNode.get('protocol')!==properties.protocol)){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['5'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['17']++;updateProperties=true;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['18']++;Y.each(properties,function(propVal,propName){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['5']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['19']++;if((__cov_SmYDCHTfRy8GfCIDJIdOtA.b['8'][0]++,propVal)&&(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['8'][1]++,anchorNode.get(propName)!==propVal)){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['7'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['20']++;anchorNode.set(propName,propVal);}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['7'][1]++;}});}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['5'][1]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['21']++;updateProperties=false;}};}();__cov_SmYDCHTfRy8GfCIDJIdOtA.s['22']++;function ensureTrailingSlash(urlStr){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['6']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['23']++;return urlStr.charAt(urlStr.length-1)==='/'?(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['9'][0]++,urlStr):(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['9'][1]++,urlStr+'/');}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['24']++;TopApp=Y.Base.create('top-app',Y.App,[],{views:{},initializer:function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['7']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['25']++;var modules,appConfigByPath={},people;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['26']++;modules=Y.Array.map(MOCK_CONFIG,function(appConfig){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['8']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['27']++;appConfigByPath[appConfig.contextPath]=appConfig;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['28']++;return appConfig.moduleName;});__cov_SmYDCHTfRy8GfCIDJIdOtA.s['29']++;Y.use(modules);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['30']++;this._appConfigByPath=appConfigByPath;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['31']++;this._menuItems=[{label:'Hi',path:'hi'},{label:'Welcome',path:'hi/welcome'},{label:'Bye',path:'bye'},{label:'Good Riddance',path:'bye/riddance'}];__cov_SmYDCHTfRy8GfCIDJIdOtA.s['32']++;people={};__cov_SmYDCHTfRy8GfCIDJIdOtA.s['33']++;Y.each(MOCK_PEOPLE,function(person){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['9']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['34']++;var identifier=person.identifier;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['35']++;people[identifier.id+'@'+identifier.namespace]=person;});__cov_SmYDCHTfRy8GfCIDJIdOtA.s['36']++;this._people=people;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['37']++;this.after('activePersonChange',this._updateAppMenuUrls,this);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['38']++;this.after('activeAppPathChange',this._updatePersonMenuUrls,this);},render:function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['10']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['39']++;var menuHtml;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['40']++;TopApp.superclass.render.apply(this,arguments);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['41']++;menuHtml=_renderMenu({menuItems:this._menuItems,people:this._people,baseUrl:this.get('baseUrl'),rootUrl:this.get('rootUrl')});__cov_SmYDCHTfRy8GfCIDJIdOtA.s['42']++;this.get('container').insertBefore(menuHtml,this.get('viewContainer'));__cov_SmYDCHTfRy8GfCIDJIdOtA.s['43']++;this._renderWelcomeScreen();__cov_SmYDCHTfRy8GfCIDJIdOtA.s['44']++;return this;},_updateAppMenuUrls:function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['11']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['45']++;var container=this.get('container'),baseUrl;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['46']++;if(!container){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['10'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['47']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['10'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['48']++;baseUrl=this.get('baseUrl');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['49']++;Y.each(this._menuItems,function(menuItem){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['12']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['50']++;var path=menuItem.path,menuItemNode=container.one('> .pure-menu a[data-path="'+path+'"]');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['51']++;if(menuItemNode){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['11'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['52']++;updateHref(menuItemNode,baseUrl+path);}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['11'][1]++;}},this);},_updatePersonMenuUrls:function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['13']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['53']++;var container=this.get('container'),rootUrl,activeAppPath;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['54']++;if(!container){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['12'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['55']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['12'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['56']++;rootUrl=this.get('rootUrl');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['57']++;activeAppPath=this.get('activeAppPath');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['58']++;activeAppPath=activeAppPath?(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['13'][0]++,'/'+activeAppPath):(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['13'][1]++,'');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['59']++;Y.each(this._people,function(person,personIdentifier){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['14']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['60']++;var menuItemNode=container.one('> .pure-menu a[data-personIdentifier="'+personIdentifier+'"]');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['61']++;if(menuItemNode){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['14'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['62']++;updateHref(menuItemNode,rootUrl+personIdentifier+activeAppPath);}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['14'][1]++;}},this);},_handleTopAppRouteChange:function(req){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['15']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['63']++;var params=req.params,appPath=params.appPath,personId=(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['16'][0]++,params.personId)&&(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['16'][1]++,params.personNs)?(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['15'][0]++,params.personId+'@'+params.personNs):(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['15'][1]++,null),activePerson=null,personChanged;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['64']++;if(personId){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['17'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['65']++;activePerson=this._people[personId];__cov_SmYDCHTfRy8GfCIDJIdOtA.s['66']++;if(!activePerson){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['18'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['67']++;alert('404! No such person with id "'+personId+'".');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['68']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['18'][1]++;}}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['17'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['69']++;personChanged=activePerson!==this.get('activePerson');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['70']++;if(personChanged){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['19'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['71']++;this._set('activePerson',activePerson);}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['19'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['72']++;if(appPath){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['20'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['73']++;if((__cov_SmYDCHTfRy8GfCIDJIdOtA.b['22'][0]++,!personChanged)&&(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['22'][1]++,this.get('activeAppPath')===appPath)){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['21'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['74']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['21'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['75']++;if(!this._appConfigByPath[appPath]){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['23'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['76']++;alert('404! No registered application with path "'+appPath+'".');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['77']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['23'][1]++;}}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['20'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['78']++;if(this._activeApp){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['24'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['79']++;this._activeApp.destroy();__cov_SmYDCHTfRy8GfCIDJIdOtA.s['80']++;this._set('activeAppPath',null);}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['24'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['81']++;if(appPath){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['25'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['82']++;this._loadAndRenderApp(appPath);}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['25'][1]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['83']++;this._renderWelcomeScreen();}},_renderWelcomeScreen:function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['16']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['84']++;this.get('viewContainer').set('text','Welcome to the nested Y.Apps spike!');},_loadAndRenderApp:function(appPath){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['17']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['85']++;this.get('viewContainer').setHTML(THROBBER_HTML);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['86']++;Y.use(this._appConfigByPath[appPath].moduleName,Y.bind(this._renderApp,this,appPath));},_renderApp:function(appPath){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['18']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['87']++;var cfg=this._appConfigByPath[appPath],ns=Y.namespace(cfg.namespace),AppFn=(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['26'][0]++,ns)&&(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['26'][1]++,ns[cfg.className]),viewContainer,appConfig,activePerson,app;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['88']++;if(!AppFn){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['27'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['89']++;alert('500! Failed to load application with path "'+appPath+'".');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['90']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['27'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['91']++;viewContainer=this.get('viewContainer');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['92']++;viewContainer.empty();__cov_SmYDCHTfRy8GfCIDJIdOtA.s['93']++;appConfig={container:viewContainer,root:this.get('baseUrl')+appPath};__cov_SmYDCHTfRy8GfCIDJIdOtA.s['94']++;if(Y.Router.html5){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['28'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['95']++;appConfig.linkSelector=null;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['28'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['96']++;activePerson=this.get('activePerson');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['97']++;if(activePerson){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['29'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['98']++;appConfig.componentContext={person:activePerson};}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['29'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['99']++;app=new AppFn(appConfig);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['100']++;this._activeApp=app;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['101']++;this._set('activeAppPath',appPath);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['102']++;app.render().dispatch();},_getAttrRootUrl:function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['19']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['103']++;return ensureTrailingSlash(this.get('root'));},_getAttrBaseUrl:function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['20']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['104']++;var baseUrl=this.get('rootUrl'),activePerson=this.get('activePerson'),identifier;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['105']++;if(activePerson){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['30'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['106']++;identifier=activePerson.identifier;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['107']++;baseUrl+=identifier.id+'@'+identifier.namespace+'/';}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['30'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['108']++;return ensureTrailingSlash(baseUrl);},_initAttrLinkSelector:function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['21']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['109']++;return Y.Router.html5?(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['31'][0]++,'a.'+CLASS_NAMES.pjax+', .'+CLASS_NAMES.pjax+' a'):(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['31'][1]++,null);}},{ATTRS:{activePerson:{readOnly:true},activeAppPath:{readOnly:true},rootUrl:{readOnly:true,getter:'_getAttrRootUrl'},baseUrl:{readOnly:true,getter:'_getAttrBaseUrl'},serverRouting:{value:true},html5:{value:true},routes:{value:[{path:'/:personId@:personNs',callbacks:'_handleTopAppRouteChange'},{path:'/:personId@:personNs/:appPath',callbacks:'_handleTopAppRouteChange'},{path:'/:personId@:personNs/:appPath/*',callbacks:'_handleTopAppRouteChange'},{path:'/:appPath',callbacks:'_handleTopAppRouteChange'},{path:'/:appPath/*',callbacks:'_handleTopAppRouteChange'}]},linkSelector:{valueFn:'_initAttrLinkSelector'}}});__cov_SmYDCHTfRy8GfCIDJIdOtA.s['110']++;Y.namespace('SPIKE').TopApp=TopApp;},'@VERSION@',{'requires':['app-base','array-extras','base','handlebars']});
