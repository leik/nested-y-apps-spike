if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/top-app/top-app.js']) {
   __coverage__['build/top-app/top-app.js'] = {"path":"build/top-app/top-app.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":19},"end":{"line":1,"column":38}}},"2":{"name":"(anonymous_2)","line":63,"loc":{"start":{"line":63,"column":14},"end":{"line":63,"column":25}}},"3":{"name":"(anonymous_3)","line":67,"loc":{"start":{"line":67,"column":8},"end":{"line":67,"column":37}}},"4":{"name":"(anonymous_4)","line":83,"loc":{"start":{"line":83,"column":27},"end":{"line":83,"column":46}}},"5":{"name":"(anonymous_5)","line":93,"loc":{"start":{"line":93,"column":22},"end":{"line":93,"column":50}}},"6":{"name":"(anonymous_6)","line":109,"loc":{"start":{"line":109,"column":14},"end":{"line":109,"column":25}}},"7":{"name":"(anonymous_7)","line":114,"loc":{"start":{"line":114,"column":37},"end":{"line":114,"column":57}}},"8":{"name":"(anonymous_8)","line":140,"loc":{"start":{"line":140,"column":22},"end":{"line":140,"column":39}}},"9":{"name":"(anonymous_9)","line":150,"loc":{"start":{"line":150,"column":9},"end":{"line":150,"column":20}}},"10":{"name":"(anonymous_10)","line":167,"loc":{"start":{"line":167,"column":21},"end":{"line":167,"column":32}}},"11":{"name":"(anonymous_11)","line":178,"loc":{"start":{"line":178,"column":26},"end":{"line":178,"column":45}}},"12":{"name":"(anonymous_12)","line":188,"loc":{"start":{"line":188,"column":24},"end":{"line":188,"column":35}}},"13":{"name":"(anonymous_13)","line":202,"loc":{"start":{"line":202,"column":23},"end":{"line":202,"column":58}}},"14":{"name":"(anonymous_14)","line":211,"loc":{"start":{"line":211,"column":27},"end":{"line":211,"column":41}}},"15":{"name":"(anonymous_15)","line":260,"loc":{"start":{"line":260,"column":23},"end":{"line":260,"column":34}}},"16":{"name":"(anonymous_16)","line":264,"loc":{"start":{"line":264,"column":20},"end":{"line":264,"column":38}}},"17":{"name":"(anonymous_17)","line":269,"loc":{"start":{"line":269,"column":13},"end":{"line":269,"column":31}}},"18":{"name":"(anonymous_18)","line":321,"loc":{"start":{"line":321,"column":18},"end":{"line":321,"column":29}}},"19":{"name":"(anonymous_19)","line":325,"loc":{"start":{"line":325,"column":18},"end":{"line":325,"column":29}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":388,"column":82}},"2":{"start":{"line":6,"column":0},"end":{"line":42,"column":12}},"3":{"start":{"line":44,"column":0},"end":{"line":56,"column":11}},"4":{"start":{"line":63,"column":0},"end":{"line":103,"column":5}},"5":{"start":{"line":64,"column":1},"end":{"line":65,"column":80}},"6":{"start":{"line":67,"column":1},"end":{"line":102,"column":3}},"7":{"start":{"line":68,"column":2},"end":{"line":70,"column":19}},"8":{"start":{"line":72,"column":2},"end":{"line":75,"column":3}},"9":{"start":{"line":74,"column":3},"end":{"line":74,"column":10}},"10":{"start":{"line":77,"column":2},"end":{"line":81,"column":3}},"11":{"start":{"line":79,"column":3},"end":{"line":79,"column":34}},"12":{"start":{"line":80,"column":3},"end":{"line":80,"column":10}},"13":{"start":{"line":83,"column":2},"end":{"line":85,"column":5}},"14":{"start":{"line":84,"column":3},"end":{"line":84,"column":51}},"15":{"start":{"line":87,"column":2},"end":{"line":87,"column":33}},"16":{"start":{"line":91,"column":2},"end":{"line":101,"column":3}},"17":{"start":{"line":92,"column":3},"end":{"line":92,"column":27}},"18":{"start":{"line":93,"column":3},"end":{"line":97,"column":6}},"19":{"start":{"line":94,"column":4},"end":{"line":96,"column":5}},"20":{"start":{"line":95,"column":5},"end":{"line":95,"column":39}},"21":{"start":{"line":100,"column":3},"end":{"line":100,"column":28}},"22":{"start":{"line":105,"column":0},"end":{"line":383,"column":3}},"23":{"start":{"line":110,"column":2},"end":{"line":112,"column":10}},"24":{"start":{"line":114,"column":2},"end":{"line":118,"column":5}},"25":{"start":{"line":115,"column":3},"end":{"line":115,"column":54}},"26":{"start":{"line":117,"column":3},"end":{"line":117,"column":31}},"27":{"start":{"line":121,"column":2},"end":{"line":121,"column":17}},"28":{"start":{"line":123,"column":2},"end":{"line":123,"column":42}},"29":{"start":{"line":125,"column":2},"end":{"line":137,"column":5}},"30":{"start":{"line":139,"column":2},"end":{"line":139,"column":14}},"31":{"start":{"line":140,"column":2},"end":{"line":143,"column":5}},"32":{"start":{"line":141,"column":3},"end":{"line":141,"column":38}},"33":{"start":{"line":142,"column":3},"end":{"line":142,"column":64}},"34":{"start":{"line":144,"column":2},"end":{"line":144,"column":24}},"35":{"start":{"line":146,"column":2},"end":{"line":146,"column":66}},"36":{"start":{"line":147,"column":2},"end":{"line":147,"column":70}},"37":{"start":{"line":151,"column":2},"end":{"line":151,"column":15}},"38":{"start":{"line":153,"column":2},"end":{"line":153,"column":50}},"39":{"start":{"line":155,"column":2},"end":{"line":160,"column":5}},"40":{"start":{"line":162,"column":2},"end":{"line":162,"column":74}},"41":{"start":{"line":164,"column":2},"end":{"line":164,"column":14}},"42":{"start":{"line":168,"column":2},"end":{"line":169,"column":11}},"43":{"start":{"line":171,"column":2},"end":{"line":174,"column":3}},"44":{"start":{"line":173,"column":3},"end":{"line":173,"column":10}},"45":{"start":{"line":176,"column":2},"end":{"line":176,"column":32}},"46":{"start":{"line":178,"column":2},"end":{"line":185,"column":11}},"47":{"start":{"line":179,"column":3},"end":{"line":180,"column":77}},"48":{"start":{"line":182,"column":3},"end":{"line":184,"column":4}},"49":{"start":{"line":183,"column":4},"end":{"line":183,"column":51}},"50":{"start":{"line":189,"column":2},"end":{"line":191,"column":17}},"51":{"start":{"line":193,"column":2},"end":{"line":196,"column":3}},"52":{"start":{"line":195,"column":3},"end":{"line":195,"column":10}},"53":{"start":{"line":198,"column":2},"end":{"line":198,"column":32}},"54":{"start":{"line":199,"column":2},"end":{"line":199,"column":44}},"55":{"start":{"line":200,"column":2},"end":{"line":200,"column":61}},"56":{"start":{"line":202,"column":2},"end":{"line":208,"column":11}},"57":{"start":{"line":203,"column":3},"end":{"line":203,"column":104}},"58":{"start":{"line":205,"column":3},"end":{"line":207,"column":4}},"59":{"start":{"line":206,"column":4},"end":{"line":206,"column":79}},"60":{"start":{"line":212,"column":2},"end":{"line":216,"column":17}},"61":{"start":{"line":218,"column":2},"end":{"line":226,"column":3}},"62":{"start":{"line":219,"column":3},"end":{"line":219,"column":41}},"63":{"start":{"line":221,"column":3},"end":{"line":225,"column":4}},"64":{"start":{"line":223,"column":4},"end":{"line":223,"column":61}},"65":{"start":{"line":224,"column":4},"end":{"line":224,"column":11}},"66":{"start":{"line":227,"column":2},"end":{"line":227,"column":62}},"67":{"start":{"line":229,"column":2},"end":{"line":231,"column":3}},"68":{"start":{"line":230,"column":3},"end":{"line":230,"column":43}},"69":{"start":{"line":233,"column":2},"end":{"line":243,"column":3}},"70":{"start":{"line":235,"column":3},"end":{"line":237,"column":4}},"71":{"start":{"line":236,"column":4},"end":{"line":236,"column":11}},"72":{"start":{"line":238,"column":3},"end":{"line":242,"column":4}},"73":{"start":{"line":240,"column":4},"end":{"line":240,"column":73}},"74":{"start":{"line":241,"column":4},"end":{"line":241,"column":11}},"75":{"start":{"line":245,"column":2},"end":{"line":250,"column":3}},"76":{"start":{"line":247,"column":3},"end":{"line":247,"column":38}},"77":{"start":{"line":248,"column":3},"end":{"line":248,"column":29}},"78":{"start":{"line":249,"column":3},"end":{"line":249,"column":36}},"79":{"start":{"line":252,"column":2},"end":{"line":257,"column":3}},"80":{"start":{"line":253,"column":3},"end":{"line":253,"column":35}},"81":{"start":{"line":256,"column":3},"end":{"line":256,"column":31}},"82":{"start":{"line":261,"column":2},"end":{"line":261,"column":79}},"83":{"start":{"line":265,"column":2},"end":{"line":265,"column":51}},"84":{"start":{"line":266,"column":2},"end":{"line":266,"column":91}},"85":{"start":{"line":270,"column":2},"end":{"line":276,"column":7}},"86":{"start":{"line":278,"column":2},"end":{"line":281,"column":3}},"87":{"start":{"line":279,"column":3},"end":{"line":279,"column":73}},"88":{"start":{"line":280,"column":3},"end":{"line":280,"column":10}},"89":{"start":{"line":283,"column":2},"end":{"line":283,"column":44}},"90":{"start":{"line":284,"column":2},"end":{"line":284,"column":24}},"91":{"start":{"line":286,"column":2},"end":{"line":292,"column":4}},"92":{"start":{"line":294,"column":2},"end":{"line":301,"column":3}},"93":{"start":{"line":296,"column":3},"end":{"line":296,"column":42}},"94":{"start":{"line":300,"column":3},"end":{"line":300,"column":52}},"95":{"start":{"line":304,"column":2},"end":{"line":304,"column":42}},"96":{"start":{"line":305,"column":2},"end":{"line":309,"column":3}},"97":{"start":{"line":306,"column":3},"end":{"line":308,"column":5}},"98":{"start":{"line":311,"column":2},"end":{"line":311,"column":29}},"99":{"start":{"line":313,"column":2},"end":{"line":313,"column":24}},"100":{"start":{"line":314,"column":2},"end":{"line":314,"column":38}},"101":{"start":{"line":316,"column":2},"end":{"line":316,"column":22}},"102":{"start":{"line":318,"column":2},"end":{"line":318,"column":26}},"103":{"start":{"line":322,"column":2},"end":{"line":322,"column":53}},"104":{"start":{"line":326,"column":2},"end":{"line":328,"column":14}},"105":{"start":{"line":330,"column":2},"end":{"line":333,"column":3}},"106":{"start":{"line":331,"column":3},"end":{"line":331,"column":40}},"107":{"start":{"line":332,"column":3},"end":{"line":332,"column":63}},"108":{"start":{"line":335,"column":2},"end":{"line":335,"column":38}},"109":{"start":{"line":385,"column":0},"end":{"line":385,"column":37}}},"branchMap":{"1":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":2},"end":{"line":72,"column":2}},{"start":{"line":72,"column":2},"end":{"line":72,"column":2}}]},"2":{"line":72,"type":"binary-expr","locations":[{"start":{"line":72,"column":6},"end":{"line":72,"column":21}},{"start":{"line":72,"column":25},"end":{"line":72,"column":44}},{"start":{"line":73,"column":3},"end":{"line":73,"column":28}}]},"3":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":2},"end":{"line":77,"column":2}},{"start":{"line":77,"column":2},"end":{"line":77,"column":2}}]},"4":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":2},"end":{"line":91,"column":2}},{"start":{"line":91,"column":2},"end":{"line":91,"column":2}}]},"5":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":6},"end":{"line":91,"column":22}},{"start":{"line":91,"column":26},"end":{"line":91,"column":76}}]},"6":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":4},"end":{"line":94,"column":4}},{"start":{"line":94,"column":4},"end":{"line":94,"column":4}}]},"7":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":8},"end":{"line":94,"column":15}},{"start":{"line":94,"column":19},"end":{"line":94,"column":55}}]},"8":{"line":171,"type":"if","locations":[{"start":{"line":171,"column":2},"end":{"line":171,"column":2}},{"start":{"line":171,"column":2},"end":{"line":171,"column":2}}]},"9":{"line":182,"type":"if","locations":[{"start":{"line":182,"column":3},"end":{"line":182,"column":3}},{"start":{"line":182,"column":3},"end":{"line":182,"column":3}}]},"10":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":2},"end":{"line":193,"column":2}},{"start":{"line":193,"column":2},"end":{"line":193,"column":2}}]},"11":{"line":200,"type":"cond-expr","locations":[{"start":{"line":200,"column":35},"end":{"line":200,"column":54}},{"start":{"line":200,"column":58},"end":{"line":200,"column":60}}]},"12":{"line":205,"type":"if","locations":[{"start":{"line":205,"column":3},"end":{"line":205,"column":3}},{"start":{"line":205,"column":3},"end":{"line":205,"column":3}}]},"13":{"line":214,"type":"cond-expr","locations":[{"start":{"line":214,"column":52},"end":{"line":214,"column":91}},{"start":{"line":214,"column":95},"end":{"line":214,"column":99}}]},"14":{"line":214,"type":"binary-expr","locations":[{"start":{"line":214,"column":14},"end":{"line":214,"column":29}},{"start":{"line":214,"column":33},"end":{"line":214,"column":48}}]},"15":{"line":218,"type":"if","locations":[{"start":{"line":218,"column":2},"end":{"line":218,"column":2}},{"start":{"line":218,"column":2},"end":{"line":218,"column":2}}]},"16":{"line":221,"type":"if","locations":[{"start":{"line":221,"column":3},"end":{"line":221,"column":3}},{"start":{"line":221,"column":3},"end":{"line":221,"column":3}}]},"17":{"line":229,"type":"if","locations":[{"start":{"line":229,"column":2},"end":{"line":229,"column":2}},{"start":{"line":229,"column":2},"end":{"line":229,"column":2}}]},"18":{"line":233,"type":"if","locations":[{"start":{"line":233,"column":2},"end":{"line":233,"column":2}},{"start":{"line":233,"column":2},"end":{"line":233,"column":2}}]},"19":{"line":235,"type":"if","locations":[{"start":{"line":235,"column":3},"end":{"line":235,"column":3}},{"start":{"line":235,"column":3},"end":{"line":235,"column":3}}]},"20":{"line":235,"type":"binary-expr","locations":[{"start":{"line":235,"column":7},"end":{"line":235,"column":21}},{"start":{"line":235,"column":25},"end":{"line":235,"column":62}}]},"21":{"line":238,"type":"if","locations":[{"start":{"line":238,"column":3},"end":{"line":238,"column":3}},{"start":{"line":238,"column":3},"end":{"line":238,"column":3}}]},"22":{"line":245,"type":"if","locations":[{"start":{"line":245,"column":2},"end":{"line":245,"column":2}},{"start":{"line":245,"column":2},"end":{"line":245,"column":2}}]},"23":{"line":252,"type":"if","locations":[{"start":{"line":252,"column":2},"end":{"line":252,"column":2}},{"start":{"line":252,"column":2},"end":{"line":252,"column":2}}]},"24":{"line":272,"type":"binary-expr","locations":[{"start":{"line":272,"column":11},"end":{"line":272,"column":13}},{"start":{"line":272,"column":17},"end":{"line":272,"column":34}}]},"25":{"line":278,"type":"if","locations":[{"start":{"line":278,"column":2},"end":{"line":278,"column":2}},{"start":{"line":278,"column":2},"end":{"line":278,"column":2}}]},"26":{"line":294,"type":"if","locations":[{"start":{"line":294,"column":2},"end":{"line":294,"column":2}},{"start":{"line":294,"column":2},"end":{"line":294,"column":2}}]},"27":{"line":305,"type":"if","locations":[{"start":{"line":305,"column":2},"end":{"line":305,"column":2}},{"start":{"line":305,"column":2},"end":{"line":305,"column":2}}]},"28":{"line":330,"type":"if","locations":[{"start":{"line":330,"column":2},"end":{"line":330,"column":2}},{"start":{"line":330,"column":2},"end":{"line":330,"column":2}}]}},"code":["(function () { YUI.add('top-app', function (Y, NAME) {","","\"use strict\";","/*global alert*/","","var CLASS_NAMES = {","\t\tpjax: 'spike-pjax'","\t},","","\tMOCK_CONFIG = [{","\t\t// /hi => Y.use('hi-app') => new Y.SPIKE.HiApp(...)","\t\tcontextPath: 'hi',","\t\tmoduleName: 'hi-app',","\t\tnamespace: 'SPIKE',","\t\tclassName: 'HiApp'","\t}, {","\t\t// /bye => use('bye-app') => new Y.SPIKE.ByeApp(...)","\t\tcontextPath: 'bye',","\t\tmoduleName: 'bye-app',","\t\tnamespace: 'SPIKE',","\t\tclassName: 'ByeApp'","\t}],","","\tMOCK_PEOPLE = [{","\t\tidentifier: {","\t\t\tid: 'james',","\t\t\tnamespace: 'human'","\t\t},","\t\tname: 'James'","\t}, {","\t\tidentifier: {","\t\t\tid: 'spock',","\t\t\tnamespace: 'vulcan'","\t\t},","\t\tname: 'Spock'","\t}],","","\tTHROBBER_HTML = '<div class=\"throbber-large\"></div>',","","\tTopApp,","\t_renderMenu,","\tupdateHref;","","_renderMenu = Y.Handlebars.compile(","\t'<div class=\"pure-menu pure-menu-open pure-menu-horizontal\">' +","\t\t'<ul class=\"' + CLASS_NAMES.pjax + '\">' +","\t\t\t'<li><a href=\"{{{baseUrl}}}\">Home</a></li>' +","\t\t\t'{{#each menuItems}}' +","\t\t\t\t'<li><a href=\"{{{../baseUrl}}}{{path}}/\" data-path=\"{{path}}\">{{label}}</a></li>' +","\t\t\t'{{/each}}' +","\t\t\t'<li class=\"pure-menu-separator\"></li>' +","\t\t\t'{{#each people}}' +","\t\t\t\t'<li><a href=\"{{{../rootUrl}}}{{@key}}/\" data-personIdentifier=\"{{@key}}\">{{name}}</a></li>' +","\t\t\t'{{/each}}' +","\t\t'</ul>' +","\t'</div>');","","// IE 9 (at least) exhibits a bug whereby progammatically updating an anchor's href attribute causes all other URL properties (e.g. host,","// port, etc) to be reset to blank. Some of these properties are used by YUI's Pjax utility to check for same-origin to determine whether","// to let a link-click go to the server or navigate via the Router. For this reason we have to (on browsers that exhibit the bug) copy all","// these properties off the anchor element and restore them after updating the href.","// TODO: when this is more than a spike this method should be in its own module and very thoroughly unit tested","updateHref = (function() {","\tvar updateProperties,","\t\tpropertiesToSave = ['hash', 'host', 'hostname', 'port', 'protocol', 'search'];","","\treturn function(anchorNode, newUrl) {","\t\tvar href = anchorNode.get('href'),","\t\t\tpathname = anchorNode.get('pathname'),","\t\t\tproperties = {};","","\t\tif (newUrl === href || newUrl === pathname ||","\t\t\tnewUrl === '/' + pathname) { // Some versions of IE don't include the leading \"/\" in the pathname attribute","\t\t\treturn;","\t\t}","","\t\tif (updateProperties === false) {","\t\t\t// We've been through here before and concluded this browser does not exhibit the bug, we can safely just update the href","\t\t\tanchorNode.set('href', newUrl);","\t\t\treturn;","\t\t}","","\t\tY.each(propertiesToSave, function(propName) {","\t\t\tproperties[propName] = anchorNode.get(propName);","\t\t});","","\t\tanchorNode.set('href', newUrl);","","\t\t// TODO: is this an appropriate test for the bug? what if the new URL has a diff protocol? (seems unlikely...)","\t\t//       Maybe check for a blank hostname or something?","\t\tif (updateProperties || anchorNode.get('protocol') !== properties.protocol) {","\t\t\tupdateProperties = true;","\t\t\tY.each(properties, function(propVal, propName) {","\t\t\t\tif (propVal && anchorNode.get(propName) !== propVal) {","\t\t\t\t\tanchorNode.set(propName, propVal);","\t\t\t\t}","\t\t\t});","\t\t} else {","\t\t\t// This browser does not exhibit the bug, set updateProperties explicitly to false so we don't bother in future href updates","\t\t\tupdateProperties = false;","\t\t}","\t};","}());","","TopApp = Y.Base.create('top-app', Y.App, [], {","\tviews: {","\t},","","\tinitializer: function() {","\t\tvar modules,","\t\t\tappConfigByPath = {},","\t\t\tpeople;","","\t\tmodules = Y.Array.map(MOCK_CONFIG, function(appConfig) {","\t\t\tappConfigByPath[appConfig.contextPath] = appConfig;","","\t\t\treturn appConfig.moduleName;","\t\t});","","\t\t// Trigger a prefetch of the modules for all the sub-apps","\t\tY.use(modules);","","\t\tthis._appConfigByPath = appConfigByPath;","","\t\tthis._menuItems = [{","\t\t\tlabel: 'Hi',","\t\t\tpath: 'hi'","\t\t}, {","\t\t\tlabel: 'Welcome',","\t\t\tpath: 'hi/welcome'","\t\t}, {","\t\t\tlabel: 'Bye',","\t\t\tpath: 'bye'","\t\t}, {","\t\t\tlabel: 'Good Riddance',","\t\t\tpath: 'bye/riddance'","\t\t}];","","\t\tpeople = {};","\t\tY.each(MOCK_PEOPLE, function(person) {","\t\t\tvar identifier = person.identifier;","\t\t\tpeople[identifier.id + '@' + identifier.namespace] =  person;","\t\t});","\t\tthis._people = people;","","\t\tthis.after('activePersonChange', this._updateAppMenuUrls, this);","\t\tthis.after('activeAppPathChange', this._updatePersonMenuUrls, this);","\t},","","\trender: function() {","\t\tvar menuHtml;","","\t\tTopApp.superclass.render.apply(this, arguments);","","\t\tmenuHtml = _renderMenu({","\t\t\tmenuItems: this._menuItems,","\t\t\tpeople: this._people,","\t\t\tbaseUrl: this.get('baseUrl'),","\t\t\trootUrl: this.get('rootUrl')","\t\t});","","\t\tthis.get('container').insertBefore(menuHtml, this.get('viewContainer'));","","\t\treturn this;","\t},","","\t_updateAppMenuUrls: function() {","\t\tvar container = this.get('container'),","\t\t\tbaseUrl;","","\t\tif (!container) {","\t\t\t// Obviously haven't rendered yet, nothing to update","\t\t\treturn;","\t\t}","","\t\tbaseUrl = this.get('baseUrl');","","\t\tY.each(this._menuItems, function(menuItem) {","\t\t\tvar path = menuItem.path,","\t\t\t\tmenuItemNode = container.one('> .pure-menu a[data-path=\"' + path + '\"]');","","\t\t\tif (menuItemNode) {","\t\t\t\tupdateHref(menuItemNode, baseUrl + path + '/');","\t\t\t}","\t\t}, this);","\t},","","\t_updatePersonMenuUrls: function() {","\t\tvar container = this.get('container'),","\t\t\trootUrl,","\t\t\tactiveAppPath;","","\t\tif (!container) {","\t\t\t// Obviously haven't rendered yet, nothing to update","\t\t\treturn;","\t\t}","","\t\trootUrl = this.get('rootUrl');","\t\tactiveAppPath = this.get('activeAppPath');","\t\tactiveAppPath = activeAppPath ? (activeAppPath + '/') : '';","","\t\tY.each(this._people, function(person, personIdentifier) {","\t\t\tvar menuItemNode = container.one('> .pure-menu a[data-personIdentifier=\"' + personIdentifier + '\"]');","","\t\t\tif (menuItemNode) {","\t\t\t\tupdateHref(menuItemNode, rootUrl + personIdentifier + '/' + activeAppPath);","\t\t\t}","\t\t}, this);","\t},","","\t_handleTopAppRouteChange: function(req) {","\t\tvar params = req.params,","\t\t\tappPath = params.appPath,","\t\t\tpersonId = params.personId && params.personNs ? (params.personId + '@' + params.personNs) : null,","\t\t\tactivePerson = null,","\t\t\tpersonChanged;","","\t\tif (personId) {","\t\t\tactivePerson = this._people[personId];","","\t\t\tif (!activePerson) {","\t\t\t\t// TODO: need to figure out how to safely and appropriately handle this error case","\t\t\t\talert('404! No such person with id \"' + personId + '\".');","\t\t\t\treturn;","\t\t\t}","\t\t}","\t\tpersonChanged = (activePerson !== this.get('activePerson'));","","\t\tif (personChanged) {","\t\t\tthis._set('activePerson', activePerson);","\t\t}","","\t\tif (appPath) {","\t\t\t// If the activePerson and activeAppPath haven't changed, do nothing","\t\t\tif (!personChanged && this.get('activeAppPath') === appPath) {","\t\t\t\treturn;","\t\t\t}","\t\t\tif (!this._appConfigByPath[appPath]) {","\t\t\t\t// TODO: need to figure out how to safely and appropriately handle this error case","\t\t\t\talert('404! No registered application with path \"' + appPath + '\".');","\t\t\t\treturn;","\t\t\t}","\t\t}","","\t\tif (this._activeApp) {","\t\t\t// TODO: potentially cache (at most 1) previous activeApp for a more performant back nav? Or will that be too memory-heavy?","\t\t\tthis._activeApp.removeTarget(this);","\t\t\tthis._activeApp.destroy();","\t\t\tthis._set('activeAppPath', null);","\t\t}","","\t\tif (appPath) {","\t\t\tthis._loadAndRenderApp(appPath);","\t\t} else {","\t\t\t// Alternatively, could have a nominated (or simply first in the list) default app in place of a welcome screen?","\t\t\tthis._renderWelcomeScreen();","\t\t}","\t},","","\t_renderWelcomeScreen: function() {","\t\tthis.get('viewContainer').set('text', 'Welcome to the nested Y.Apps spike!');","\t},","","\t_loadAndRenderApp: function(appPath) {","\t\tthis.get('viewContainer').setHTML(THROBBER_HTML);","\t\tY.use(this._appConfigByPath[appPath].moduleName, Y.bind(this._renderApp, this, appPath));","\t},","","\t_renderApp: function(appPath) {","\t\tvar cfg = this._appConfigByPath[appPath],","\t\t\tns = Y.namespace(cfg.namespace),","\t\t\tAppFn = ns && ns[cfg.className],","\t\t\tviewContainer,","\t\t\tappConfig,","\t\t\tactivePerson,","\t\t\tapp;","","\t\tif (!AppFn) {","\t\t\talert('500! Failed to load application with path \"' + appPath + '\".');","\t\t\treturn;","\t\t}","","\t\tviewContainer = this.get('viewContainer');","\t\tviewContainer.empty();","","\t\tappConfig = {","\t\t\tcontainer: viewContainer,","\t\t\troot: this.get('baseUrl') + appPath,","\t\t\t// Null out the linkSelector as this Y.App is already listening for Pjax link clicks.","\t\t\t// See http://yuilibrary.com/yui/docs/app/#known-limitations for more info.","\t\t\tlinkSelector: null","\t\t};","","\t\tif (!this.get('html5')) {","\t\t\t// Use a separate attribute to build up PJAX links as we've lied to the nested Y.App about what its root is","\t\t\tappConfig.pjaxRootUrl = appConfig.root;","","\t\t\t// Remove the top level Y.App's 'root' from the beginning of the sub-app's 'root' otherwise clicking on sub-links results in the","\t\t\t// wrong path appended after the /#","\t\t\tappConfig.root = this.removeRoot(appConfig.root);","\t\t}","","","\t\tactivePerson = this.get('activePerson');","\t\tif (activePerson) {","\t\t\tappConfig.componentContext = {","\t\t\t\tperson: activePerson","\t\t\t};","\t\t}","","\t\tapp = new AppFn(appConfig);","","\t\tthis._activeApp = app;","\t\tthis._set('activeAppPath', appPath);","","\t\tapp.addTarget(this);","","\t\tapp.render().dispatch();","\t},","","\t_getAttrRootUrl: function() {","\t\treturn this._normalizePath(this.get('root') + '/');","\t},","","\t_getAttrBaseUrl: function() {","\t\tvar baseUrl = this.get('rootUrl'),","\t\t\tactivePerson = this.get('activePerson'),","\t\t\tidentifier;","","\t\tif (activePerson) {","\t\t\tidentifier = activePerson.identifier;","\t\t\tbaseUrl += identifier.id + '@' + identifier.namespace + '/';","\t\t}","","\t\treturn this._normalizePath(baseUrl);","\t}","}, {","\tATTRS: {","\t\t// The following four attributes should probably be in a view model of some sort.","","\t\tactivePerson: {","\t\t\treadOnly: true","\t\t},","","\t\tactiveAppPath: {","\t\t\treadOnly: true","\t\t},","","\t\trootUrl: {","\t\t\treadOnly: true,","\t\t\tgetter: '_getAttrRootUrl'","\t\t},","","\t\tbaseUrl: {","\t\t\treadOnly: true,","\t\t\tgetter: '_getAttrBaseUrl'","\t\t},","","\t\troutes: {","\t\t\t// The order of these routes is important to ensure no confusion between \"/appPath\" and \"/id@ns\" as the first part of the URL","\t\t\tvalue: [{","\t\t\t\tpath: '/:personId@:personNs',","\t\t\t\tcallbacks: '_handleTopAppRouteChange'","\t\t\t}, {","\t\t\t\tpath: '/:personId@:personNs/:appPath',","\t\t\t\tcallbacks: '_handleTopAppRouteChange'","\t\t\t}, {","\t\t\t\tpath: '/:personId@:personNs/:appPath/*',","\t\t\t\tcallbacks: '_handleTopAppRouteChange'","\t\t\t}, {","\t\t\t\tpath: '/:appPath',","\t\t\t\tcallbacks: '_handleTopAppRouteChange'","\t\t\t}, {","\t\t\t\tpath: '/:appPath/*',","\t\t\t\tcallbacks: '_handleTopAppRouteChange'","\t\t\t}]","\t\t},","","\t\tlinkSelector: {","\t\t\tvalue: 'a.' + CLASS_NAMES.pjax +', .' + CLASS_NAMES.pjax + ' a'","\t\t}","\t}","});","","Y.namespace('SPIKE').TopApp = TopApp;","","","}, '@VERSION@', {\"requires\": [\"app-base\", \"array-extras\", \"base\", \"handlebars\"]});","","}());"]};
}
var __cov_SmYDCHTfRy8GfCIDJIdOtA = __coverage__['build/top-app/top-app.js'];
__cov_SmYDCHTfRy8GfCIDJIdOtA.s['1']++;YUI.add('top-app',function(Y,NAME){'use strict';__cov_SmYDCHTfRy8GfCIDJIdOtA.f['1']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['2']++;var CLASS_NAMES={pjax:'spike-pjax'},MOCK_CONFIG=[{contextPath:'hi',moduleName:'hi-app',namespace:'SPIKE',className:'HiApp'},{contextPath:'bye',moduleName:'bye-app',namespace:'SPIKE',className:'ByeApp'}],MOCK_PEOPLE=[{identifier:{id:'james',namespace:'human'},name:'James'},{identifier:{id:'spock',namespace:'vulcan'},name:'Spock'}],THROBBER_HTML='<div class="throbber-large"></div>',TopApp,_renderMenu,updateHref;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['3']++;_renderMenu=Y.Handlebars.compile('<div class="pure-menu pure-menu-open pure-menu-horizontal">'+'<ul class="'+CLASS_NAMES.pjax+'">'+'<li><a href="{{{baseUrl}}}">Home</a></li>'+'{{#each menuItems}}'+'<li><a href="{{{../baseUrl}}}{{path}}/" data-path="{{path}}">{{label}}</a></li>'+'{{/each}}'+'<li class="pure-menu-separator"></li>'+'{{#each people}}'+'<li><a href="{{{../rootUrl}}}{{@key}}/" data-personIdentifier="{{@key}}">{{name}}</a></li>'+'{{/each}}'+'</ul>'+'</div>');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['4']++;updateHref=function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['2']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['5']++;var updateProperties,propertiesToSave=['hash','host','hostname','port','protocol','search'];__cov_SmYDCHTfRy8GfCIDJIdOtA.s['6']++;return function(anchorNode,newUrl){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['3']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['7']++;var href=anchorNode.get('href'),pathname=anchorNode.get('pathname'),properties={};__cov_SmYDCHTfRy8GfCIDJIdOtA.s['8']++;if((__cov_SmYDCHTfRy8GfCIDJIdOtA.b['2'][0]++,newUrl===href)||(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['2'][1]++,newUrl===pathname)||(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['2'][2]++,newUrl==='/'+pathname)){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['1'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['9']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['1'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['10']++;if(updateProperties===false){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['3'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['11']++;anchorNode.set('href',newUrl);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['12']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['3'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['13']++;Y.each(propertiesToSave,function(propName){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['4']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['14']++;properties[propName]=anchorNode.get(propName);});__cov_SmYDCHTfRy8GfCIDJIdOtA.s['15']++;anchorNode.set('href',newUrl);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['16']++;if((__cov_SmYDCHTfRy8GfCIDJIdOtA.b['5'][0]++,updateProperties)||(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['5'][1]++,anchorNode.get('protocol')!==properties.protocol)){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['4'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['17']++;updateProperties=true;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['18']++;Y.each(properties,function(propVal,propName){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['5']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['19']++;if((__cov_SmYDCHTfRy8GfCIDJIdOtA.b['7'][0]++,propVal)&&(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['7'][1]++,anchorNode.get(propName)!==propVal)){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['6'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['20']++;anchorNode.set(propName,propVal);}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['6'][1]++;}});}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['4'][1]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['21']++;updateProperties=false;}};}();__cov_SmYDCHTfRy8GfCIDJIdOtA.s['22']++;TopApp=Y.Base.create('top-app',Y.App,[],{views:{},initializer:function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['6']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['23']++;var modules,appConfigByPath={},people;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['24']++;modules=Y.Array.map(MOCK_CONFIG,function(appConfig){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['7']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['25']++;appConfigByPath[appConfig.contextPath]=appConfig;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['26']++;return appConfig.moduleName;});__cov_SmYDCHTfRy8GfCIDJIdOtA.s['27']++;Y.use(modules);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['28']++;this._appConfigByPath=appConfigByPath;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['29']++;this._menuItems=[{label:'Hi',path:'hi'},{label:'Welcome',path:'hi/welcome'},{label:'Bye',path:'bye'},{label:'Good Riddance',path:'bye/riddance'}];__cov_SmYDCHTfRy8GfCIDJIdOtA.s['30']++;people={};__cov_SmYDCHTfRy8GfCIDJIdOtA.s['31']++;Y.each(MOCK_PEOPLE,function(person){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['8']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['32']++;var identifier=person.identifier;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['33']++;people[identifier.id+'@'+identifier.namespace]=person;});__cov_SmYDCHTfRy8GfCIDJIdOtA.s['34']++;this._people=people;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['35']++;this.after('activePersonChange',this._updateAppMenuUrls,this);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['36']++;this.after('activeAppPathChange',this._updatePersonMenuUrls,this);},render:function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['9']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['37']++;var menuHtml;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['38']++;TopApp.superclass.render.apply(this,arguments);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['39']++;menuHtml=_renderMenu({menuItems:this._menuItems,people:this._people,baseUrl:this.get('baseUrl'),rootUrl:this.get('rootUrl')});__cov_SmYDCHTfRy8GfCIDJIdOtA.s['40']++;this.get('container').insertBefore(menuHtml,this.get('viewContainer'));__cov_SmYDCHTfRy8GfCIDJIdOtA.s['41']++;return this;},_updateAppMenuUrls:function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['10']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['42']++;var container=this.get('container'),baseUrl;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['43']++;if(!container){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['8'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['44']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['8'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['45']++;baseUrl=this.get('baseUrl');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['46']++;Y.each(this._menuItems,function(menuItem){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['11']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['47']++;var path=menuItem.path,menuItemNode=container.one('> .pure-menu a[data-path="'+path+'"]');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['48']++;if(menuItemNode){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['9'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['49']++;updateHref(menuItemNode,baseUrl+path+'/');}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['9'][1]++;}},this);},_updatePersonMenuUrls:function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['12']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['50']++;var container=this.get('container'),rootUrl,activeAppPath;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['51']++;if(!container){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['10'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['52']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['10'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['53']++;rootUrl=this.get('rootUrl');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['54']++;activeAppPath=this.get('activeAppPath');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['55']++;activeAppPath=activeAppPath?(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['11'][0]++,activeAppPath+'/'):(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['11'][1]++,'');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['56']++;Y.each(this._people,function(person,personIdentifier){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['13']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['57']++;var menuItemNode=container.one('> .pure-menu a[data-personIdentifier="'+personIdentifier+'"]');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['58']++;if(menuItemNode){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['12'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['59']++;updateHref(menuItemNode,rootUrl+personIdentifier+'/'+activeAppPath);}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['12'][1]++;}},this);},_handleTopAppRouteChange:function(req){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['14']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['60']++;var params=req.params,appPath=params.appPath,personId=(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['14'][0]++,params.personId)&&(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['14'][1]++,params.personNs)?(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['13'][0]++,params.personId+'@'+params.personNs):(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['13'][1]++,null),activePerson=null,personChanged;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['61']++;if(personId){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['15'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['62']++;activePerson=this._people[personId];__cov_SmYDCHTfRy8GfCIDJIdOtA.s['63']++;if(!activePerson){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['16'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['64']++;alert('404! No such person with id "'+personId+'".');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['65']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['16'][1]++;}}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['15'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['66']++;personChanged=activePerson!==this.get('activePerson');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['67']++;if(personChanged){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['17'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['68']++;this._set('activePerson',activePerson);}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['17'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['69']++;if(appPath){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['18'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['70']++;if((__cov_SmYDCHTfRy8GfCIDJIdOtA.b['20'][0]++,!personChanged)&&(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['20'][1]++,this.get('activeAppPath')===appPath)){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['19'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['71']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['19'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['72']++;if(!this._appConfigByPath[appPath]){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['21'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['73']++;alert('404! No registered application with path "'+appPath+'".');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['74']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['21'][1]++;}}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['18'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['75']++;if(this._activeApp){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['22'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['76']++;this._activeApp.removeTarget(this);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['77']++;this._activeApp.destroy();__cov_SmYDCHTfRy8GfCIDJIdOtA.s['78']++;this._set('activeAppPath',null);}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['22'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['79']++;if(appPath){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['23'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['80']++;this._loadAndRenderApp(appPath);}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['23'][1]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['81']++;this._renderWelcomeScreen();}},_renderWelcomeScreen:function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['15']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['82']++;this.get('viewContainer').set('text','Welcome to the nested Y.Apps spike!');},_loadAndRenderApp:function(appPath){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['16']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['83']++;this.get('viewContainer').setHTML(THROBBER_HTML);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['84']++;Y.use(this._appConfigByPath[appPath].moduleName,Y.bind(this._renderApp,this,appPath));},_renderApp:function(appPath){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['17']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['85']++;var cfg=this._appConfigByPath[appPath],ns=Y.namespace(cfg.namespace),AppFn=(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['24'][0]++,ns)&&(__cov_SmYDCHTfRy8GfCIDJIdOtA.b['24'][1]++,ns[cfg.className]),viewContainer,appConfig,activePerson,app;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['86']++;if(!AppFn){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['25'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['87']++;alert('500! Failed to load application with path "'+appPath+'".');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['88']++;return;}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['25'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['89']++;viewContainer=this.get('viewContainer');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['90']++;viewContainer.empty();__cov_SmYDCHTfRy8GfCIDJIdOtA.s['91']++;appConfig={container:viewContainer,root:this.get('baseUrl')+appPath,linkSelector:null};__cov_SmYDCHTfRy8GfCIDJIdOtA.s['92']++;if(!this.get('html5')){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['26'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['93']++;appConfig.pjaxRootUrl=appConfig.root;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['94']++;appConfig.root=this.removeRoot(appConfig.root);}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['26'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['95']++;activePerson=this.get('activePerson');__cov_SmYDCHTfRy8GfCIDJIdOtA.s['96']++;if(activePerson){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['27'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['97']++;appConfig.componentContext={person:activePerson};}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['27'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['98']++;app=new AppFn(appConfig);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['99']++;this._activeApp=app;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['100']++;this._set('activeAppPath',appPath);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['101']++;app.addTarget(this);__cov_SmYDCHTfRy8GfCIDJIdOtA.s['102']++;app.render().dispatch();},_getAttrRootUrl:function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['18']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['103']++;return this._normalizePath(this.get('root')+'/');},_getAttrBaseUrl:function(){__cov_SmYDCHTfRy8GfCIDJIdOtA.f['19']++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['104']++;var baseUrl=this.get('rootUrl'),activePerson=this.get('activePerson'),identifier;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['105']++;if(activePerson){__cov_SmYDCHTfRy8GfCIDJIdOtA.b['28'][0]++;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['106']++;identifier=activePerson.identifier;__cov_SmYDCHTfRy8GfCIDJIdOtA.s['107']++;baseUrl+=identifier.id+'@'+identifier.namespace+'/';}else{__cov_SmYDCHTfRy8GfCIDJIdOtA.b['28'][1]++;}__cov_SmYDCHTfRy8GfCIDJIdOtA.s['108']++;return this._normalizePath(baseUrl);}},{ATTRS:{activePerson:{readOnly:true},activeAppPath:{readOnly:true},rootUrl:{readOnly:true,getter:'_getAttrRootUrl'},baseUrl:{readOnly:true,getter:'_getAttrBaseUrl'},routes:{value:[{path:'/:personId@:personNs',callbacks:'_handleTopAppRouteChange'},{path:'/:personId@:personNs/:appPath',callbacks:'_handleTopAppRouteChange'},{path:'/:personId@:personNs/:appPath/*',callbacks:'_handleTopAppRouteChange'},{path:'/:appPath',callbacks:'_handleTopAppRouteChange'},{path:'/:appPath/*',callbacks:'_handleTopAppRouteChange'}]},linkSelector:{value:'a.'+CLASS_NAMES.pjax+', .'+CLASS_NAMES.pjax+' a'}}});__cov_SmYDCHTfRy8GfCIDJIdOtA.s['109']++;Y.namespace('SPIKE').TopApp=TopApp;},'@VERSION@',{'requires':['app-base','array-extras','base','handlebars']});
